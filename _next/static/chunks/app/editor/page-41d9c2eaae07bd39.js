(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[219],{9048:function(e,a,t){Promise.resolve().then(t.bind(t,47))},47:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return containers_editor_page}});var r=t(9424),s=t(3381);let copyToClipboard=e=>navigator.clipboard.writeText(e),l="system";var n=t(3028);let updateItemInArray=(e,a,t)=>{let r=[...e];return r[a]=t,r},removeItemFromArray=(e,a)=>{let t=[...e];return t.splice(a,1),t},examplesReducer=(e,a)=>{let t;switch(a.type){case"SET_EXAMPLES":return a.examples;case"ADD_DEFAULT_EXAMPLE":return[...e,{messages:[{role:l,content:""}]}];case"ADD_EXAMPLE":return[...e,a.example];case"UPDATE_MESSAGE":return t=e[a.exampleIndex].messages,updateItemInArray(e,a.exampleIndex,{...e[a.exampleIndex],messages:updateItemInArray(t,a.messageIndex,a.message)});case"ADD_MESSAGE_TO_EXAMPLE":return t=e[a.exampleIndex].messages,updateItemInArray(e,a.exampleIndex,{...e[a.exampleIndex],messages:[...t,{role:l,content:""}]});case"REMOVE_MESSAGE_FROM_EXAMPLE":return t=e[a.exampleIndex].messages,updateItemInArray(e,a.exampleIndex,{...e[a.exampleIndex],messages:removeItemFromArray(t,a.messageIndex)});case"REMOVE_EXAMPLE":return removeItemFromArray(e,a.exampleIndex);default:throw Error("Unknown action type.")}};var o=t(5954),components_button=e=>{let{onClick:a,disabled:t=!1,children:s,className:l="",ariaLabel:n}=e;return(0,r.jsx)("button",{onClick:a,disabled:t,className:"p-2 whitespace-nowrap rounded ".concat(l),...n?{"aria-label":n}:{},children:s})};let i="p-2 border border-gray-300 hover:border-gray-400 focus:border-blue-500 rounded-md bg-white dark:bg-gray-700 dark:text-gray-300 dark:hover:border-gray-500 dark:focus:border-blue-700";var message_form=e=>{let{role:a,content:t,rows:s,contentPlaceholder:l,ariaLabel:n,onRoleChange:o,removeExample:d}=e,handleRoleChange=e=>{["system","user","assistant"].includes(e)&&o({role:e,content:t})},handleMessageChange=e=>{o({role:a,content:e})};return(0,r.jsxs)("div",{className:"flex flex-col m-1",children:[(0,r.jsxs)("div",{className:"flex flex-row justify-between mb-2",children:[(0,r.jsxs)("select",{value:a,onChange:e=>handleRoleChange(e.target.value),className:i,"aria-label":"Choose Role",children:[(0,r.jsx)("option",{value:"system",children:"System"}),(0,r.jsx)("option",{value:"user",children:"User"}),(0,r.jsx)("option",{value:"assistant",children:"Assistant"})]}),d&&(0,r.jsx)("button",{onClick:d,className:"px-2 ml-2 bg-red-500 text-white rounded dark:bg-red-700 hover:bg-red-600 active:bg-red-700","aria-label":"Remove This Example",children:"Remove"})]}),(0,r.jsx)("textarea",{placeholder:l,value:t,onChange:e=>handleMessageChange(e.target.value),className:i,...n?{"aria-label":n}:{},rows:s})]})},message_list=e=>{let{messages:a,updateMessageInExample:t,addMessageToExample:s,removeMessageFromExample:l,removeExample:n,exampleIndex:o}=e;return(0,r.jsxs)("div",{className:"flex space-x-4 mb-1",children:[a.map((e,a)=>(0,r.jsx)(message_form,{role:e.role,content:e.content,rows:4,contentPlaceholder:"Message Content",onRoleChange:e=>t(o,a,e),removeExample:()=>l(o,a),ariaLabel:"Message ".concat(a+1," in Example ").concat(o+1)},a)),(0,r.jsxs)("div",{className:"flex flex-col my-1",children:[(0,r.jsxs)(components_button,{onClick:()=>s(o),className:"h-1/2 bg-blue-500 text-white dark:bg-blue-700 hover:bg-blue-600 active:bg-blue-700 mb-2",ariaLabel:"Add New Message to [".concat(o+1,"] Example"),children:["Add New",(0,r.jsx)("br",{}),"Message"]}),(0,r.jsxs)(components_button,{onClick:()=>n(o),className:"h-1/2 bg-red-500 text-white dark:bg-red-700 hover:bg-red-600 active:bg-red-700",ariaLabel:"Remove [".concat(o+1,"] Example"),children:["Remove This",(0,r.jsx)("br",{}),"Example"]})]})]})},example_list=e=>{let{examples:a,updateMessageInExample:t,addMessageToExample:s,removeMessageFromExample:l,removeExample:n}=e;return(0,r.jsx)("div",{children:a.map((e,a)=>(0,r.jsx)("div",{className:"mb-4 overflow-x-auto",children:(0,r.jsx)(message_list,{messages:e.messages,updateMessageInExample:t,addMessageToExample:s,removeMessageFromExample:l,exampleIndex:a,removeExample:n})},a))})};let handleFormSubmit=e=>{e.preventDefault()},getUploadButtonClasses=e=>e?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-orange-500 text-white hover:bg-orange-600 active:bg-orange-700 dark:bg-orange-700 dark:hover:bg-orange-600 dark:active:bg-orange-700",getExamplesClasses=e=>"bg-gray-200 dark:bg-gray-700 p-2 ml-4 rounded-lg flex-shrink-0 ".concat(e<10?"text-red-500":"");var header=e=>{let{fileName:a,onFileNameChange:t,handleUpload:s,isUploadDisabled:l,copyToClipboardAsJsonl:n,examplesLength:o}=e;return(0,r.jsxs)("header",{className:"container mx-auto sticky top-0 z-50 bg-white dark:bg-gray-800 p-4 flex justify-between items-center whitespace-nowrap overflow-x-auto",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("form",{onSubmit:handleFormSubmit,children:[(0,r.jsx)("label",{className:"sr-only",htmlFor:"filenameInput",children:"File Name"}),(0,r.jsx)("input",{id:"filenameInput",type:"text",value:a,onChange:t,className:"p-2 border border-gray-300 hover:border-gray-400 focus:border-blue-500 rounded-md m-1 bg-white dark:bg-gray-700 dark:text-gray-300 dark:hover:border-gray-500 dark:focus:border-blue-700",placeholder:"File Name"}),(0,r.jsx)(components_button,{onClick:s,className:getUploadButtonClasses(l),disabled:l,children:"Upload"})]}),(0,r.jsx)(components_button,{onClick:n,className:"ml-4 bg-yellow-500 text-white hover:bg-yellow-600 active:bg-yellow-700 dark:bg-yellow-700 dark:hover:bg-yellow-600 dark:active:bg-yellow-700",children:"Copy to Clipboard"})]}),(0,r.jsx)("div",{title:o<10?"A minimum of 10 examples is required.":"",className:getExamplesClasses(o),children:(0,r.jsxs)("span",{className:"text-xl font-medium",children:[o," example",1!==o?"s":""]})})]})},editor_page=e=>{let{handleFileDrop:a,handleDragOver:t,fileName:s,handleFileNameChange:l,handleUpload:n,isUploadDisabled:i,copyToClipboardAsJsonl:d,examples:c,updateMessageInExample:m,addMessageToExample:p,removeMessageFromExample:u,removeExample:g,addNewExample:x,showFirstMessage:h,setShowFirstMessage:b,defaultFirstRole:f,setDefaultFirstRole:v,defaultFirstMessage:y,setDefaultFirstMessage:E}=e;return(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 min-h-screen",onDrop:a,onDragOver:t,children:[(0,r.jsx)(header,{fileName:s,onFileNameChange:l,handleUpload:n,isUploadDisabled:i,copyToClipboardAsJsonl:d,examplesLength:c.length}),(0,r.jsxs)("main",{className:"container mx-auto pt-0 pr-4 pb-4 pl-4",children:[(0,r.jsx)("div",{className:"ml-1",children:(0,r.jsx)(o.Z,{checked:h,onChange:b,label:"Set default first message"})}),h&&(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(message_form,{role:f,content:y,rows:2,contentPlaceholder:"First Message Content",onRoleChange:e=>{v(e.role),E(e.content)},ariaLabel:"First Message Content"})}),(0,r.jsx)(example_list,{examples:c,updateMessageInExample:m,addMessageToExample:p,removeMessageFromExample:u,removeExample:g}),(0,r.jsx)(components_button,{onClick:x,className:"bg-green-500 ml-1 text-white dark:bg-green-700 hover:bg-green-600 active:bg-green-700",ariaLabel:"Add New Example",children:"Add New Example"})]})]})};let examplesFromJsonl=e=>{let a=[{messages:[{role:l,content:""}]}];if(!e)return a;try{return e.split("\n").map(e=>JSON.parse(e))}catch(e){return a}},handleDragOver=e=>{e.preventDefault()};var containers_editor_page=e=>{let{fileName:a,dataset:t}=e,[o,i]=(0,s.useState)(null!=a?a:""),[d,c]=(0,s.useReducer)(examplesReducer,examplesFromJsonl(t)),[m,p]=(0,s.useState)(!0),[u,g]=(0,s.useState)(l),[x,h]=(0,s.useState)(""),[b,f]=(0,s.useState)(null),v=!b||!o.trim();(0,s.useEffect)(()=>{var e,a;f(null!==(a=null===(e=(0,n.Pi)())||void 0===e?void 0:e.trim())&&void 0!==a?a:null)},[]);let examplesToJsonl=()=>d.map(e=>JSON.stringify(e)).join("\n"),handleFileDrop=async e=>{e.preventDefault();let a=e.dataTransfer.files;if(0===a.length||!window.confirm("Are you sure you want to overwrite the content with this file?"))return;let t=a[0],r=new FileReader;r.onload=e=>{var a;let t=null===(a=e.target)||void 0===a?void 0:a.result,r=examplesFromJsonl(t);c({type:"SET_EXAMPLES",examples:r})},r.readAsText(t)};async function handleUpload(){let e=examplesToJsonl(),a=new Blob([e],{type:"application/jsonl"}),t=new FormData;t.append("file",a,o),t.append("purpose","fine-tune");try{let e=await fetch("https://api.openai.com/v1/files",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(b)},body:t});if(!e.ok)throw Error("Failed to upload data: ".concat(e.statusText));let a=await e.json();console.log("Data uploaded successfully:",a)}catch(e){console.error("Error uploading data:",e)}}return(0,r.jsx)(editor_page,{handleFileDrop:handleFileDrop,handleDragOver:handleDragOver,fileName:o,handleFileNameChange:e=>{i(e.target.value)},handleUpload:handleUpload,isUploadDisabled:v,copyToClipboardAsJsonl:()=>{copyToClipboard(examplesToJsonl())},examples:d,updateMessageInExample:(e,a,t)=>{c({type:"UPDATE_MESSAGE",exampleIndex:e,messageIndex:a,message:t})},addMessageToExample:e=>{c({type:"ADD_MESSAGE_TO_EXAMPLE",exampleIndex:e})},removeMessageFromExample:(e,a)=>{c({type:"REMOVE_MESSAGE_FROM_EXAMPLE",exampleIndex:e,messageIndex:a})},removeExample:e=>{c({type:"REMOVE_EXAMPLE",exampleIndex:e})},addNewExample:()=>{m?c({type:"ADD_EXAMPLE",example:{messages:[{role:u,content:x}]}}):c({type:"ADD_DEFAULT_EXAMPLE"})},showFirstMessage:m,setShowFirstMessage:p,defaultFirstRole:u,setDefaultFirstRole:g,defaultFirstMessage:x,setDefaultFirstMessage:h})}},5954:function(e,a,t){"use strict";var r=t(9424);t(3381),a.Z=e=>{let{checked:a,onChange:t,label:s}=e;return(0,r.jsx)("div",{className:"mb-4 flex items-center",children:(0,r.jsxs)("label",{htmlFor:"toggle-switch",className:"flex items-center cursor-pointer",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{id:"toggle-switch",type:"checkbox",checked:a,onChange:e=>t(e.target.checked),className:"sr-only","aria-labelledby":"toggle-label"}),(0,r.jsx)("div",{className:"block w-10 h-6 rounded-full ".concat(a?"bg-green-500":"bg-gray-400")}),(0,r.jsx)("div",{className:"dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition ".concat(a?"transform translate-x-full":"")})]}),(0,r.jsx)("span",{className:"ml-3 text-gray-700 dark:text-gray-300",children:s})]})})}},3028:function(e,a,t){"use strict";t.d(a,{Pi:function(){return getApiKey},ks:function(){return saveApiKey},uB:function(){return fetchFiles}});let saveApiKey=e=>{sessionStorage.setItem("apiKey",e)},getApiKey=()=>sessionStorage.getItem("apiKey"),fetchFiles=async e=>{let a=await fetch("https://api.openai.com/v1/files",{headers:{Authorization:"Bearer ".concat(e)}});if(!a.ok)throw Error("Network response was not ok"+a.statusText);return await a.json()}},4990:function(e,a,t){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=t(3381),s=Symbol.for("react.element"),l=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),n=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function q(e,a,t){var r,i={},d=null,c=null;for(r in void 0!==t&&(d=""+t),void 0!==a.key&&(d=""+a.key),void 0!==a.ref&&(c=a.ref),a)l.call(a,r)&&!o.hasOwnProperty(r)&&(i[r]=a[r]);if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return{$$typeof:s,type:e,key:d,ref:c,props:i,_owner:n.current}}a.jsx=q,a.jsxs=q},9424:function(e,a,t){"use strict";e.exports=t(4990)}},function(e){e.O(0,[362,95,744],function(){return e(e.s=9048)}),_N_E=e.O()}]);
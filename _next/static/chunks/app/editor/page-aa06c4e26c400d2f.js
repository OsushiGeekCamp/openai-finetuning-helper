(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[219],{9048:function(e,a,r){Promise.resolve().then(r.bind(r,3479))},3479:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return containers_editor_page}});var s=r(9424),t=r(3381);let copyToClipboard=e=>navigator.clipboard.writeText(e),l="system",updateItemInArray=(e,a,r)=>{let s=[...e];return s[a]=r,s},removeItemFromArray=(e,a)=>{let r=[...e];return r.splice(a,1),r},examplesReducer=(e,a)=>{let r;switch(a.type){case"SET_EXAMPLES":return a.examples;case"ADD_DEFAULT_EXAMPLE":return[...e,{messages:[{role:l,content:""}]}];case"ADD_EXAMPLE":return[...e,a.example];case"UPDATE_MESSAGE":return r=e[a.exampleIndex].messages,updateItemInArray(e,a.exampleIndex,{...e[a.exampleIndex],messages:updateItemInArray(r,a.messageIndex,a.message)});case"ADD_MESSAGE_TO_EXAMPLE":return r=e[a.exampleIndex].messages,updateItemInArray(e,a.exampleIndex,{...e[a.exampleIndex],messages:[...r,{role:l,content:""}]});case"REMOVE_MESSAGE_FROM_EXAMPLE":return r=e[a.exampleIndex].messages,updateItemInArray(e,a.exampleIndex,{...e[a.exampleIndex],messages:removeItemFromArray(r,a.messageIndex)});case"REMOVE_EXAMPLE":return removeItemFromArray(e,a.exampleIndex);default:throw Error("Unknown action type.")}};var toggle_switch=e=>{let{checked:a,onChange:r,label:t}=e;return(0,s.jsx)("div",{className:"mb-4 flex items-center",children:(0,s.jsxs)("label",{htmlFor:"toggle-switch",className:"flex items-center cursor-pointer",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{id:"toggle-switch",type:"checkbox",checked:a,onChange:e=>r(e.target.checked),className:"sr-only","aria-labelledby":"toggle-label"}),(0,s.jsx)("div",{className:"block w-10 h-6 rounded-full ".concat(a?"bg-green-500":"bg-gray-400")}),(0,s.jsx)("div",{className:"dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition ".concat(a?"transform translate-x-full":"")})]}),(0,s.jsx)("span",{className:"ml-3 text-gray-700",children:t})]})})},components_button=e=>{let{onClick:a,disabled:r=!1,children:t,className:l="",ariaLabel:o}=e;return(0,s.jsx)("button",{onClick:a,disabled:r,className:"p-2 whitespace-nowrap rounded ".concat(l),...o?{"aria-label":o}:{},children:t})};let o="p-2 border border-gray-300 hover:border-gray-400 focus:border-blue-500 rounded-md bg-white dark:bg-gray-700 dark:text-gray-300 dark:hover:border-gray-500 dark:focus:border-blue-700";var message_form=e=>{let{role:a,content:r,rows:t,contentPlaceholder:l,ariaLabel:n,onRoleChange:d,removeExample:i}=e,handleRoleChange=e=>{["system","user","assistant"].includes(e)&&d({role:e,content:r})},handleMessageChange=e=>{d({role:a,content:e})};return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"flex flex-row justify-between mb-2",children:[(0,s.jsxs)("select",{value:a,onChange:e=>handleRoleChange(e.target.value),className:o,"aria-label":"Choose Role",children:[(0,s.jsx)("option",{value:"system",children:"System"}),(0,s.jsx)("option",{value:"user",children:"User"}),(0,s.jsx)("option",{value:"assistant",children:"Assistant"})]}),i&&(0,s.jsx)("button",{onClick:i,className:"px-2 ml-2 bg-red-500 text-white rounded dark:bg-red-700 hover:bg-red-600 active:bg-red-700","aria-label":"Remove This Example",children:"Remove"})]}),(0,s.jsx)("textarea",{placeholder:l,value:r,onChange:e=>handleMessageChange(e.target.value),className:o,...n?{"aria-label":n}:{},rows:t})]})},message_list=e=>{let{messages:a,updateMessageInExample:r,addMessageToExample:t,removeMessageFromExample:l,removeExample:o,exampleIndex:n}=e;return(0,s.jsxs)("div",{className:"flex space-x-4",children:[a.map((e,a)=>(0,s.jsx)(message_form,{role:e.role,content:e.content,rows:4,contentPlaceholder:"Message Content",onRoleChange:e=>r(n,a,e),removeExample:()=>l(n,a),ariaLabel:"Message ".concat(a+1," in Example ").concat(n+1)},a)),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)(components_button,{onClick:()=>t(n),className:"h-1/2 bg-blue-500 text-white dark:bg-blue-700 hover:bg-blue-600 active:bg-blue-700 mb-2",ariaLabel:"Add New Message to [".concat(n+1,"] Example"),children:["Add New",(0,s.jsx)("br",{}),"Message"]}),(0,s.jsxs)(components_button,{onClick:()=>o(n),className:"h-1/2 bg-red-500 text-white dark:bg-red-700 hover:bg-red-600 active:bg-red-700",ariaLabel:"Remove [".concat(n+1,"] Example"),children:["Remove This",(0,s.jsx)("br",{}),"Example"]})]})]})},example_list=e=>{let{examples:a,updateMessageInExample:r,addMessageToExample:t,removeMessageFromExample:l,removeExample:o}=e;return(0,s.jsx)("div",{children:a.map((e,a)=>(0,s.jsx)("div",{className:"mb-4 overflow-x-auto",children:(0,s.jsx)(message_list,{messages:e.messages,updateMessageInExample:r,addMessageToExample:t,removeMessageFromExample:l,exampleIndex:a,removeExample:o})},a))})};let handleFormSubmit=e=>{e.preventDefault()},getUploadButtonClasses=e=>e?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-orange-500 text-white hover:bg-orange-600 active:bg-orange-700 dark:bg-orange-700 dark:hover:bg-orange-600 dark:active:bg-orange-700",getExamplesClasses=e=>"bg-gray-200 dark:bg-gray-700 p-2 ml-4 rounded-lg flex-shrink-0 ".concat(e<10?"text-red-500":"");var header=e=>{let{fileName:a,onFileNameChange:r,handleUpload:t,isUploadDisabled:l,copyToClipboardAsJsonl:o,examplesLength:n}=e;return(0,s.jsxs)("header",{className:"container mx-auto sticky top-0 z-50 bg-white dark:bg-gray-800 p-4 flex justify-between items-center whitespace-nowrap",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("form",{onSubmit:handleFormSubmit,children:[(0,s.jsx)("label",{className:"sr-only",htmlFor:"filenameInput",children:"File Name"}),(0,s.jsx)("input",{id:"filenameInput",type:"text",value:a,onChange:r,className:"p-2 border border-gray-300 hover:border-gray-400 focus:border-blue-500 rounded-md m-1 bg-white dark:bg-gray-700 dark:text-gray-300 dark:hover:border-gray-500 dark:focus:border-blue-700",placeholder:"File Name"}),(0,s.jsx)(components_button,{onClick:t,className:getUploadButtonClasses(l),disabled:l,children:"Upload"})]}),(0,s.jsx)(components_button,{onClick:o,className:"ml-4 bg-yellow-500 text-white hover:bg-yellow-600 active:bg-yellow-700 dark:bg-yellow-700 dark:hover:bg-yellow-600 dark:active:bg-yellow-700",children:"Copy to Clipboard"})]}),(0,s.jsx)("div",{title:n<10?"A minimum of 10 examples is required.":"",className:getExamplesClasses(n),children:(0,s.jsxs)("span",{className:"text-xl font-medium",children:[n," example",1!==n?"s":""]})})]})},editor_page=e=>{let{handleFileDrop:a,handleDragOver:r,fileName:t,handleFileNameChange:l,handleUpload:o,isUploadDisabled:n,copyToClipboardAsJsonl:d,examples:i,updateMessageInExample:c,addMessageToExample:m,removeMessageFromExample:p,removeExample:g,addNewExample:x,showFirstMessage:u,setShowFirstMessage:h,defaultFirstRole:b,setDefaultFirstRole:v,defaultFirstMessage:E,setDefaultFirstMessage:f}=e;return(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 min-h-screen",onDrop:a,onDragOver:r,children:[(0,s.jsx)(header,{fileName:t,onFileNameChange:l,handleUpload:o,isUploadDisabled:n,copyToClipboardAsJsonl:d,examplesLength:i.length}),(0,s.jsxs)("main",{className:"container mx-auto pt-0 pr-4 pb-4 pl-4",children:[(0,s.jsx)(toggle_switch,{checked:u,onChange:h,label:"Set default first message"}),u&&(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(message_form,{role:b,content:E,rows:2,contentPlaceholder:"First Message Content",onRoleChange:e=>{v(e.role),f(e.content)},ariaLabel:"First Message Content"})}),(0,s.jsx)(example_list,{examples:i,updateMessageInExample:c,addMessageToExample:m,removeMessageFromExample:p,removeExample:g}),(0,s.jsx)(components_button,{onClick:x,className:"bg-green-500 text-white dark:bg-green-700 hover:bg-green-600 active:bg-green-700",ariaLabel:"Add New Example",children:"Add New Example"})]})]})};let examplesFromJsonl=e=>{let a=[{messages:[{role:l,content:""}]}];if(!e)return a;try{return e.split("\n").map(e=>JSON.parse(e))}catch(e){return a}},handleDragOver=e=>{e.preventDefault()};var containers_editor_page=e=>{let{apiKey:a,fileName:r,dataset:o}=e,[n,d]=(0,t.useState)(null!=r?r:""),[i,c]=(0,t.useReducer)(examplesReducer,examplesFromJsonl(o)),[m,p]=(0,t.useState)(!0),[g,x]=(0,t.useState)(l),[u,h]=(0,t.useState)(""),b=!(null==a?void 0:a.trim())||!n.trim(),examplesToJsonl=()=>i.map(e=>JSON.stringify(e)).join("\n"),handleFileDrop=async e=>{e.preventDefault();let a=e.dataTransfer.files;if(0===a.length||!window.confirm("Are you sure you want to overwrite the content with this file?"))return;let r=a[0],s=new FileReader;s.onload=e=>{var a;let r=null===(a=e.target)||void 0===a?void 0:a.result,s=examplesFromJsonl(r);c({type:"SET_EXAMPLES",examples:s})},s.readAsText(r)};async function handleUpload(){let e=examplesToJsonl(),r=new Blob([e],{type:"application/jsonl"}),s=new FormData;s.append("file",r,n),s.append("purpose","fine-tune");try{let e=await fetch("https://api.openai.com/v1/files",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:s});if(!e.ok)throw Error("Failed to upload data: ".concat(e.statusText));let r=await e.json();console.log("Data uploaded successfully:",r)}catch(e){console.error("Error uploading data:",e)}}return(0,s.jsx)(editor_page,{handleFileDrop:handleFileDrop,handleDragOver:handleDragOver,fileName:n,handleFileNameChange:e=>{d(e.target.value)},handleUpload:handleUpload,isUploadDisabled:b,copyToClipboardAsJsonl:()=>{copyToClipboard(examplesToJsonl())},examples:i,updateMessageInExample:(e,a,r)=>{c({type:"UPDATE_MESSAGE",exampleIndex:e,messageIndex:a,message:r})},addMessageToExample:e=>{c({type:"ADD_MESSAGE_TO_EXAMPLE",exampleIndex:e})},removeMessageFromExample:(e,a)=>{c({type:"REMOVE_MESSAGE_FROM_EXAMPLE",exampleIndex:e,messageIndex:a})},removeExample:e=>{c({type:"REMOVE_EXAMPLE",exampleIndex:e})},addNewExample:()=>{m?c({type:"ADD_EXAMPLE",example:{messages:[{role:g,content:u}]}}):c({type:"ADD_DEFAULT_EXAMPLE"})},showFirstMessage:m,setShowFirstMessage:p,defaultFirstRole:g,setDefaultFirstRole:x,defaultFirstMessage:u,setDefaultFirstMessage:h})}},4990:function(e,a,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=r(3381),t=Symbol.for("react.element"),l=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function q(e,a,r){var s,d={},i=null,c=null;for(s in void 0!==r&&(i=""+r),void 0!==a.key&&(i=""+a.key),void 0!==a.ref&&(c=a.ref),a)l.call(a,s)&&!n.hasOwnProperty(s)&&(d[s]=a[s]);if(e&&e.defaultProps)for(s in a=e.defaultProps)void 0===d[s]&&(d[s]=a[s]);return{$$typeof:t,type:e,key:i,ref:c,props:d,_owner:o.current}}a.jsx=q,a.jsxs=q},9424:function(e,a,r){"use strict";e.exports=r(4990)}},function(e){e.O(0,[362,95,744],function(){return e(e.s=9048)}),_N_E=e.O()}]);